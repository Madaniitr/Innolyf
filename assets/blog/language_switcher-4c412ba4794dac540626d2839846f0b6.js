var userLang,dateEl=$(domRoot+"header > p > span"),headlineEl=$(domRoot+"header > h1 > a"),supportedLang=langs.filter(function(e){return userLangFromServer===e.id});supportedLang.length<1?userLang="en":userLang=userLangFromServer;var toggleWrapper=$("<div></div>",{"class":"image-center"}),toggle=$("<div></div>",{id:"language-toggle"});$.each(langs,function(e,t){var n=$("<a></a>",{"class":"switcher",id:t.id,href:"/locale?locale="+t.id+"&redirect="+$(location).attr("pathname"),html:t.name});n.appendTo(toggle)}),toggle.appendTo(toggleWrapper),toggleWrapper.prependTo(domRoot+".content");var showLang=function(e){$(domRoot+".content > .post").hide(),$(domRoot+".content > .post."+e).show(),$(domRoot+".content > div > #language-toggle > .switcher").removeClass("active"),$(domRoot+".content > div > #language-toggle > .switcher#"+e).addClass("active");var t=langs.filter(function(t){return e.indexOf(t.id)>-1});dateEl.html(t[0].date),headlineEl.html(t[0].headline)};$(domRoot+".content > div > #language-toggle > .switcher").click(function(e){e.preventDefault();var t=e.target.id;showLang(t)}),showLang(userLang);