(function(){"use strict";function s(e){i.indexOf(e)==-1&&("Analytics"in window&&Analytics.viewed(e),i.push(e))}function f(){r=document.getElementById("close-button"),r.addEventListener("click",function(e){s("checkout_anim_stop"),S(),setTimeout(function(){N()},1e3),e.preventDefault()})}function l(){return Math.max(660,window.innerHeight)}function p(){h=window.innerHeight,o?d():n.style.height=h+"px"}function d(){h=window.innerHeight,h<660&&(h=660);var e=window.innerWidth,t=e,n=h*1.5,r=e,i=h,s=n/t,o=t/n,f=a.createRadialGradient(r,i*o,0,r,i*o,t);u.width=e,u.height=h,f.addColorStop(0,"#FEFDFE"),f.addColorStop(.25,"#F8CDDA"),f.addColorStop(.85,"#1D2B64"),f.addColorStop(1,"#0E153A"),a.fillStyle=f,a.setTransform(1,0,0,s,0,0),a.fillRect(0,0,e,h*o)}function T(){function t(){function d(e){e.classList.remove(n),e.classList.add(r),e.textContent=""}function v(){var e=u;while(e--){var t=o.item(e);t.classList.contains(r)&&t.classList.remove(r)}}function m(){v();if(f==i)return;f++,l=0,c=o.item(f),h=t[f],p=h.length,d(c),f==i?e.push(setTimeout(function(){document.querySelector(".product").classList.add("expanded"),e.push(setTimeout(function(){requestAnimationFrame(y)},2e3))},2e3)):requestAnimationFrame(y)}function g(e,t){return Math.random()*(t-e)+e}function y(){var t=g(70,120);e.push(setTimeout(function(){c.textContent+=h[l++],l<p?requestAnimationFrame(y):m()},t))}var t=readConfig("fields_content_json"),n="placeholder",r="active",i=t.length-1,o=document.querySelectorAll("."+n),u=o.length,a=0,f=-1,l,c,h,p;s("checkout_anim_slide1"),m()}function i(t){t.propertyName=="opacity"&&(s("checkout_anim_slide3"),n.classList.add("goToSlide3"),e.push(setTimeout(u,5e3)))}function u(){function s(){e.push(setTimeout(function(){t.textContent+=n[r++],r<i?requestAnimationFrame(s):a()},70))}var t=o.querySelector(".email"),n="ben@stripe.com",r=0,i=n.length;t.classList.add("active"),requestAnimationFrame(s)}function a(){function s(){e.push(setTimeout(function(){t.item(r).textContent=n[r++],r<i?requestAnimationFrame(s):l()},250))}var t=o.querySelectorAll(".digit"),n="500840",r=0,i=n.length;o.classList.add("goToVerificationCode"),e.push(setTimeout(function(){requestAnimationFrame(s)},3e3))}function l(){o.classList.add("goToLoggedIn"),o.querySelector(".tick").addEventListener("transitionend",function(e){e.propertyName=="opacity"&&h()})}function h(){n.classList.add("goToSlide4"),s("checkout_anim_slide4");var t=document.getElementById("slide4");t.querySelector("span:last-child").addEventListener("transitionend",function(){e.push(setTimeout(function(){N()},1e3))}),t.addEventListener("transitionend",function(e){e.target==this&&(s("checkout_anim_end"),p())})}function p(){r.classList.remove("visible"),x=!1,n.removeAttribute("class"),n.removeChild(n.querySelector(".content"));var e=w.cloneNode(!0);e.classList.add("new"),n.appendChild(e),f(),T()}var e=[];n.querySelector("#slide0 .tick").addEventListener("transitionend",function(e){e.propertyName=="opacity"&&(s("checkout_anim_slide2"),n.classList.add("goToSlide2"))}),n.querySelector("#slide2 .tick").addEventListener("transitionend",i);var o=n.querySelector(".iphone .browser"),c="animation"in document.body.style?"animationend":"webkitAnimationEnd";E=function(){if(n.hasAttribute("class"))return;x=!0,s("checkout_anim_stop"),n.querySelector("button").blur(),n.className="goToSlide1",e.push(setTimeout(function(){t(),document.querySelector("#slide0 button").remove()},3200))},S=function(){r.classList.remove("visible"),x=!1;for(var t=0;t<e.length;t++)clearTimeout(e[t]);e=[],n.querySelector(".content").classList.add("hidden"),setTimeout(function(){p()},600)}}function N(){if($("body").hasClass("iOS"))return;$(window).scrollTop()==0&&k(l(),1e3,A)}var e=function(){var e,t,n={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(e in n)if(e in document){t=n[e];break}return function(n){return n&&document.addEventListener(t,n),!document[e]}}();e(function(){e()||x&&S()});var t=$("#universal section");t.on("mouseenter",function(){$("#universal").attr("class",$(this).attr("id"))});var n=document.getElementById("intro"),r,i=[];if(document.body.id!="checkout")return;if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var o=!0,u=document.createElement("canvas"),a=u.getContext("2d");document.body.classList.add("chrome"),n.appendChild(u)}navigator.userAgent.match(/(iPad|iPhone|iPod)/i)&&document.body.classList.add("iOS"),navigator.userAgent.match(/android/i)&&document.body.classList.add("android");if(!("transition"in document.body.style)){$(document.body).addClass("no-animation loaded");return}n.addEventListener("click",function(e){e.target.nodeName.toLowerCase()=="button"&&(E(),r.classList.add("visible"))}),f(),window.addEventListener("scroll",function(){var e=$(window).scrollTop();e>=l()&&s("checkout_scroll_to_content")});var c=n.getBoundingClientRect().top,h;o&&(d(),window.addEventListener("resize",d)),setTimeout(function(){document.body.classList.add("ready")},100);var v=["header-animation/bottom","header-animation/empty-form","header-animation/header","hero/en_iphone","hero/product-shadow"],m=v.length,g=0,y=1;typeof window["devicePixelRatio"]!="undefined"&&(y=window.devicePixelRatio);if(y>1){var b=m;while(b--)v[b]+="@2x"}(function(){var e=m;while(e--){var t=document.createElement("img");t.src="/img/checkout/marketing/"+v[e]+".png",t.addEventListener("load",function(){m==++g&&document.body.classList.add("loaded")})}})();var w=n.querySelector(".content").cloneNode(!0),E,S,x=!1,C=function(e,t,n,r){var i=function(t){var r=1-t;return 3*r*r*t*e+3*r*t*t*n+t*t*t},s=function(e){var n=1-e;return 3*n*n*e*t+3*n*e*e*r+e*e*e},o=function(t){var r=1-t;return 3*(2*(t-1)*t+r*r)*e+3*(-t*t*t+2*r*t)*n},u={},a=.001,f=1/a;for(var l=0;l<=f;l+=1){var c=i(l*a),h=Math.round(c/a);u[h]=s(l*a)}var p=function(e,t){e=Math.round(e/a),t*=f;var n=e,r=u[e],i=1;while(!r){e=n+i;if(Math.abs(e-n)>t)break;i>0?i=-i:i=-2*i,r=u[e]}return r};return function(e,t){var n=p(e,t);if(!n){var r=0,o=1,f=e,l;while(r<o){l=i(f);if(Math.abs(l-e)<t){n=s(f);break}e>l?r=f:o=f,f=(o-r)*.5+r}u[Math.round(e/a)]=n}return n}},k=function(e,t,n){function a(r){var i=Date.now(),f=Math.min(1,(i-o)/t),l=n(f,u);L.scrollTop=l*(e-s)+s,f<1&&requestAnimationFrame(a)}var r=document.height,i=window.innerHeight;e>r-i&&(e=r-i);var s=L.scrollTop,o=Date.now(),u=1/240/(t/1e3);requestAnimationFrame(a)},L=/firefox/i.test(navigator.userAgent)||/Trident/i.test(navigator.userAgent)?document.documentElement:document.body,A=C(.645,.045,.355,1);T()})();