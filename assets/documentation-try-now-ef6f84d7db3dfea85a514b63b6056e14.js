function tryItNow(){function v(){if(t!="finish"){if(t=="card"&&!l)return;$.getJSON("/docs/demos/quickstart",{step:t,query:encodeURIComponent(a)},function(e){e&&e.step&&e.step!=t&&(window.Analytics&&typeof Analytics.action=="function"&&Analytics.action("quickstart_demo",{step:t,object:e.object}),i=e,u&&m())}).always(function(){++s<o&&setTimeout(function(){v()},1e3)})}}function m(r){if(i){g(t,i.object),t=="card"&&l&&(i.object=l),r||x(t,i);var s=t;t=i.step,a=i.query,n++,e.find('.try-now-header [data-step="'+t+'"] [data-description]').each(function(){$(this).text(i.description[$(this).attr("data-description")])});if(t!="finish"){var o=e.find('.tabs-tab[data-step="'+t+'"] code');o.html(i.request),Prism.highlightElement(o.get(0)),e.find(".usage .info").text("Copy and run this curl request in your Terminal."),e.find(".usage").show(),e.find(".tip").hide()}else e.find(".usage").hide(),e.find(".tip").show();setTimeout(function(){y(t)},r?100:2e3),i=null}}function g(t,n){e.find(".success.active").removeClass("active");var r=e.find('.success[data-step="'+t+'"]');n&&n.id?(r.find(".object").text(n.id),r.addClass("active completed")):r.hasClass("completed")&&r.addClass("active")}function y(t,i){var s=e.find('nav [data-step="'+t+'"]').index();if(s>n||s==r)return!1;e.find("nav .active").removeClass("active").addClass("completed"),e.find('nav [data-step="'+t+'"]').addClass("active"),e.find(".try-now-header .active").removeClass("active"),e.find('.try-now-header [data-step="'+t+'"]').addClass("active"),tabs.select(e.find(".tabs").get(0),e.find('.tabs-tab[data-step="'+t+'"]').get(0),i),g(t),r=s}function w(){!b&&L(document.getElementById("card-element"))&&(E(f),b=!0,p.removeEventListener("scroll",w),window.removeEventListener("resize",w))}function E(t){setTimeout(function(){S(e.find(".card-form .name"),"name",t.name)},100),setTimeout(function(){S(h,"cardNumber",t.number)},1e3),setTimeout(function(){S(h,"cardExpiry",t.exp_month+"/"+String(t.exp_year).substr(2))},2500),setTimeout(function(){S(h,"cardCvc",t.cvc)},3500),setTimeout(function(){S(h,"postalCode",t.zip)},4e3)}function S(e,t,n){var r=0,i=setInterval(function(){var s=String(n).substring(0,r++);if(e===h){var o={};o[t]=s,h.update({__privateValue:o})}else $(e).prop("tagName")==="INPUT"&&$(e).val(s);r>n.length&&clearInterval(i)},75)}function x(e,t){typeof window.sessionStorage!="undefined"&&(sessionStorage.setItem("quickstart_demo_timestamp",(new Date).getTime()),sessionStorage.setItem("quickstart_demo_"+e,JSON.stringify(t)))}function T(){t="card",n=0,l="",e.find(".card-form button").text("Submit").removeAttr("disabled"),e.find('nav li:not([data-step="card"])').removeClass("completed"),e.find(".success.completed").removeClass("completed active");if(typeof window.sessionStorage!="undefined")for(var r=sessionStorage.length-1;r>=0;r--)sessionStorage.key(r).indexOf("quickstart_demo")>-1&&sessionStorage.removeItem(sessionStorage.key(r))}function N(){if(typeof window.sessionStorage!="undefined"){var e=sessionStorage.getItem("quickstart_demo_timestamp");if(!e||e<(new Date).getTime()-36e5)return T(),!1;var n=sessionStorage.getItem("quickstart_demo_"+t);if(n)try{var r=JSON.parse(n);i=r,m(!0),y(t,!1),N(),r.step=="customer"&&v()}catch(s){}}}function C(){u=!1}function k(){u=!0,s>=o&&(s=0,v()),setTimeout(m,100)}function L(e){if(!e)return;var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)&&t.width>0&&t.height>0}var e=$(".try-now"),t="card",n=0,r=0,i,s=0,o=60,u=!0,a="",f={name:"Jenny Rosen",number:"4242424242424242",exp_month:12,exp_year:(new Date).getFullYear()+1,cvc:"123",zip:"94301"},l;N();var c=stripe.elements(),h=c.create("card");h.mount("#card-element");var p=document.getElementById("content-wrapper");p.addEventListener("scroll",w,!1),window.addEventListener("resize",w,!1),w();var d=e.find(".card-form button");d.click(function(){return t!="card"&&T(),stripe.createToken(h).then(function(e){e.error||(d.text("Success!").attr("disabled","disabled"),l=e.token,g(t,l),a=l.id,v())}),!1}),e.find("nav li").click(function(){y($(this).attr("data-step"))}),e.find(".restart").click(function(){return y("card",!0),T(),!1});var b=!1;window.addEventListener("blur",C),window.addEventListener("focus",k),page.onPageChange(function(){p.removeEventListener("scroll",w),window.removeEventListener("resize",w),window.removeEventListener("blur",C),window.removeEventListener("focus",k)})};