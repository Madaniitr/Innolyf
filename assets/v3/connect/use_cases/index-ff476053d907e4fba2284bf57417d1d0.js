(function(){var e=[].slice.call(document.querySelectorAll("aside.video")),t=document.querySelector(".video-overlay"),n=t.querySelector("video"),r=function(e){var r=e.getAttribute("data-video-url-mp4"),i=e.getAttribute("data-video-url-ogg");r!=n.getAttribute("src")&&i!=n.getAttribute("src")?(e.classList.add("loading"),n.addEventListener("canplay",function(){e.classList.remove("loading"),t.classList.add("visible")}),n.canPlayType("video/mp4")!=""?n.setAttribute("src",r):n.setAttribute("src",i)):(t.classList.add("visible"),n.play())},i=function(){t.classList.remove("visible"),n.pause()};e.forEach(function(e){e.addEventListener("click",function(){r(e)})}),t.addEventListener("click",function(e){e.target!=n&&i()}),document.addEventListener("keyup",function(e){e.keyCode==27&&i()})})();